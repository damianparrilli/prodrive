<section class="mx-auto px-5 max-w-[1200px] pb-32">
    <div class="cta-card bg-cover relative bg-cta bg-center bg-no-repeat rounded-2xl py-24 px-8 text-center flex flex-col md:flex-row justify-between items-center gap-6">
        <div class="text-white relative z-10">
            <h2 class="text-2xl md:text-3xl mb-2">¿Listo para llevar su empresa al siguiente nivel?</h2>
            <p class="text-base sm:text-lg md:text-xl">Contáctenos hoy mismo y descubre cómo podemos ayudarte a optimizar tus procesos y potenciar tu crecimiento.</p>
            <a href="/#contacto" class="mt-6 bg-acento hover:bg-acentoHover text-white px-6 py-3 rounded-full inline-block">Contactenos ahora</a>
        </div>
        
    </div>    
</section>

<style>
  .bg-cta{
        background-image: url('/images/ctabanner.webp');
  }
    .bg-cta::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        border-radius: 1rem;
        z-index: 1;
    }

    .cta-card {
        opacity: 0;
    }
</style>

<script is:inline>
  function initCTAAnimacion() {
    if (window.gsap && window.ScrollTrigger) {
      window.gsap.registerPlugin(window.ScrollTrigger);

      setTimeout(() => {
        window.ScrollTrigger.refresh();
      }, 100);

      const ctaCard = document.querySelector(".cta-card");

      if (ctaCard) {
        window.gsap.fromTo(
          ctaCard,
          {
            opacity: 0,
            y: 80,
          },
          {
            opacity: 1,
            y: 0,
            duration: 0.8,
            ease: "power2.out",
            scrollTrigger: {
              trigger: ctaCard,
              start: "top 90%",
              toggleActions: "play none none reverse",
            },
          }
        );
      }
    }
  }
  
  document.addEventListener('astro:page-load', initCTAAnimacion);
  
  document.addEventListener('astro:before-preparation', () => {
    if (window.ScrollTrigger) {
      window.ScrollTrigger.getAll().forEach(trigger => trigger.kill());
    }
  });
</script>